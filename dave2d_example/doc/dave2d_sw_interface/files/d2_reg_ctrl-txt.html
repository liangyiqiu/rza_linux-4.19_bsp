<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Control registers</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Control_registers"></a>Control registers</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Control_registers" >Control registers</a></td><td class=SDescription></td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#write_only" >write only</a></td><td class=SDescription></td></tr><tr class="SRegister SIndent2 SMarked"><td class=SEntry><a href="#D2_CONTROL" >D2_CONTROL</a></td><td class=SDescription>geometry control register</td></tr><tr class="SRegister SIndent2"><td class=SEntry><a href="#D2_CONTROL2" >D2_CONTROL2</a></td><td class=SDescription>surface control register</td></tr><tr class="SRegister SIndent2 SMarked"><td class=SEntry><a href="#D2_IRQCTL" >D2_IRQCTL</a></td><td class=SDescription>interrupt control register</td></tr><tr class="SRegister SIndent2"><td class=SEntry><a href="#D2_CACHECTL" >D2_CACHECTL</a></td><td class=SDescription>cache control register</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#read_only" >read only</a></td><td class=SDescription></td></tr><tr class="SRegister SIndent2 SMarked"><td class=SEntry><a href="#D2_STATUS" >D2_STATUS</a></td><td class=SDescription>status control register</td></tr><tr class="SRegister SIndent2"><td class=SEntry><a href="#D2_HWREVISION" >D2_HWREVISION</a></td><td class=SDescription>hardware version and featureset ID</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="write_only"></a>write only</h3></div></div>

<div class="CRegister"><div class=CTopic><h3 class=CTitle><a name="D2_CONTROL"></a>D2_CONTROL</h3><div class=CBody><p>geometry control register</p><p>Offset: 0</p><p>This register controls the pixel enumeration and selection units, deciding which pixels are part of the geometry.</p><p>Each geometry limiter can be enabled (default is disabled) by setting one of the following bits.&nbsp; Note that disabled limiters are always read as 1.0</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[0]  D2C_LIM1ENABLE</td><td class=CDLDescription>enable limiter 1</td></tr><tr><td class=CDLEntry>Bit[1]  D2C_LIM2ENABLE</td><td class=CDLDescription>enable limiter 2</td></tr><tr><td class=CDLEntry>Bit[2]  D2C_LIM3ENABLE</td><td class=CDLDescription>enable limiter 3</td></tr><tr><td class=CDLEntry>Bit[3]  D2C_LIM4ENABLE</td><td class=CDLDescription>enable limiter 4</td></tr><tr><td class=CDLEntry>Bit[4]  D2C_LIM5ENABLE</td><td class=CDLDescription>enable limiter 5</td></tr><tr><td class=CDLEntry>Bit[5]  D2C_LIM6ENABLE</td><td class=CDLDescription>enable limiter 6</td></tr></table><p>Limiters are grouped into three pairs, each of which can be coupled to track a quadractic instead of a linear equation.&nbsp; Note that in case of a coupled limiter only the first should have it&rsquo;s enable Bit[]set.&nbsp; Default is no coupling.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[6]  D2C_QUAD1ENABLE</td><td class=CDLDescription>enable quadratic coupling of limiters 1 and 2</td></tr><tr><td class=CDLEntry>Bit[7]  D2C_QUAD2ENABLE</td><td class=CDLDescription>enable quadratic coupling of limiters 3 and 4</td></tr><tr><td class=CDLEntry>Bit[8]  D2C_QUAD3ENABLE</td><td class=CDLDescription>enable quadratic coupling of limiters 5 and 6</td></tr></table><p>First two limiter outputs can be routed through an additional unit before clamping in order to mirror their gradient and form a &lsquo;band&rsquo; instead of the usual &lsquo;halfplane&rsquo;.&nbsp; Default is no band postprocessing.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[15] D2C_BAND1ENABLE</td><td class=CDLDescription>enable band postprocess for limiter 1 (see <a href="d2_reg_lim-txt.html#D2_L1BAND" class=LRegister id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">D2_L1BAND</a>)</td></tr><tr><td class=CDLEntry>Bit[16] D2C_BAND2ENABLE</td><td class=CDLDescription>enable band postprocess for limiter 2 (see <a href="d2_reg_lim-txt.html#D2_L2BAND" class=LRegister id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">D2_L2BAND</a>)</td></tr></table><p>By default each limiter output is clamped to fit into a range of [0..1] but by setting a limiter into threshold mode you can force its output to become binary (exactly 1.0 or exactly 0.0 at all times).</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[9]  D2C_LIM1THRESHOLD</td><td class=CDLDescription>enable limiter 1 threshold mode</td></tr><tr><td class=CDLEntry>Bit[10] D2C_LIM2THRESHOLD</td><td class=CDLDescription>enable limiter 2 threshold mode</td></tr><tr><td class=CDLEntry>Bit[11] D2C_LIM3THRESHOLD</td><td class=CDLDescription>enable limiter 3 threshold mode</td></tr><tr><td class=CDLEntry>Bit[12] D2C_LIM4THRESHOLD</td><td class=CDLDescription>enable limiter 4 threshold mode</td></tr><tr><td class=CDLEntry>Bit[13] D2C_LIM5THRESHOLD</td><td class=CDLDescription>enable limiter 5 threshold mode</td></tr><tr><td class=CDLEntry>Bit[14] D2C_LIM6THRESHOLD</td><td class=CDLDescription>enable limiter 6 threshold mode</td></tr></table><p>All limiter outputs are combined into a single value by an array of combiner units.&nbsp; Each unit does a logical AND (intersection) by default, but can be switched into union mode in order to perform a logical OR instead.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[17] D2C_UNION12</td><td class=CDLDescription>combine limter 1 &amp; 2 as union (output is called A)</td></tr><tr><td class=CDLEntry>Bit[18] D2C_UNION34</td><td class=CDLDescription>combine limter 3 &amp; 4 as union (output is called B)</td></tr><tr><td class=CDLEntry>Bit[19] D2C_UNION56</td><td class=CDLDescription>combine limter 5 &amp; 6 as union (output is called D)</td></tr><tr><td class=CDLEntry>Bit[20] D2C_UNIONAB</td><td class=CDLDescription>combine outputs A &amp; B as union (output is called C)</td></tr><tr><td class=CDLEntry>Bit[21] D2C_UNIONCD</td><td class=CDLDescription>combine outputs C &amp; D as union (output is final)</td></tr></table><p>To improve enumeration efficiency on convex shapes specify the following hints (see <a href="d2_reg_misc-txt.html#D2_PITCH" class=LRegister id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">D2_PITCH</a> aswell).</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[22] D2C_SPANABORT</td><td class=CDLDescription>shape is horizontally convex. only a single span per scanline</td></tr><tr><td class=CDLEntry>Bit[23] D2C_SPANSTORE</td><td class=CDLDescription>nextline span start is always equal or left to current-line span start</td></tr></table><p>To increase the precision of all limiters the following bit can be set (see also feature bits of <a href="#D2_HWREVISION" class=LRegister id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">D2_HWREVISION</a>)</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[24] D2C_LIMITERPRECISION</td><td class=CDLDescription>increase precision of limiters from 16.16 to 10.22</td></tr></table><p>Reserved bits</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[27..31]</td><td class=CDLDescription>reserved for SoftDave internal use</td></tr></table></div></div></div>

<div class="CRegister"><div class=CTopic><h3 class=CTitle><a name="D2_CONTROL2"></a>D2_CONTROL2</h3><div class=CBody><p>surface control register</p><p>Offset: 1</p><p>This register controls the colorization, texturing and blending units, deciding what color a pixel should have.</p><p>By default the pixel color source is <a href="d2_reg_color-txt.html#D2_COLOR1" class=LRegister id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">D2_COLOR1</a> but setting one of the following bits changes this.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[0]  D2C_PATTERNENABLE</td><td class=CDLDescription>Pixel source is a pattern color (blend of <a href="d2_reg_color-txt.html#D2_COLOR1" class=LRegister id=link6 onMouseOver="ShowTip(event, 'tt5', 'link6')" onMouseOut="HideTip('tt5')">D2_COLOR1</a> and <a href="d2_reg_color-txt.html#D2_COLOR2" class=LRegister id=link7 onMouseOver="ShowTip(event, 'tt6', 'link7')" onMouseOut="HideTip('tt6')">D2_COLOR2</a> depending on <a href="d2_reg_color-txt.html#D2_PATTERN" class=LRegister id=link8 onMouseOver="ShowTip(event, 'tt7', 'link8')" onMouseOut="HideTip('tt7')">D2_PATTERN</a> and pattern index)</td></tr><tr><td class=CDLEntry>Bit[1]  D2C_TEXTUREENABLE</td><td class=CDLDescription>Pixel source is read from texture and used as an alpha to blend between <a href="d2_reg_color-txt.html#D2_COLOR1" class=LRegister id=link9 onMouseOver="ShowTip(event, 'tt5', 'link9')" onMouseOut="HideTip('tt5')">D2_COLOR1</a> and <a href="d2_reg_color-txt.html#D2_COLOR2" class=LRegister id=link10 onMouseOver="ShowTip(event, 'tt6', 'link10')" onMouseOut="HideTip('tt6')">D2_COLOR2</a></td></tr><tr><td class=CDLEntry>Bit[2]  D2C_PATTERNSOURCEL5</td><td class=CDLDescription>Limiter 5 is used as pattern index instead of the default U-Limiter</td></tr></table><h4 class=CHeading>Textures</h4><p>When using texturemapping additional control bits are used to specify details for the fetching of texels:</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[16] D2C_TEXTUREFILTERX</td><td class=CDLDescription>linear filtering on texture u axis</td></tr><tr><td class=CDLEntry>Bit[17] D2C_TEXTUREFILTERY</td><td class=CDLDescription>linear filtering on texture v axis</td></tr><tr><td class=CDLEntry>Bit[14] D2C_TEXTURECLAMPX</td><td class=CDLDescription>clamp instead of mask u coordinate</td></tr><tr><td class=CDLEntry>Bit[15] D2C_TEXTURECLAMPY</td><td class=CDLDescription>clamp instead of mask v coordinate</td></tr></table><p>Texture formats are defined by :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[18] D2C_READFORMAT1</td><td class=CDLDescription>bit0 of the texture format descriptor</td></tr><tr><td class=CDLEntry>Bit[19] D2C_READFORMAT2</td><td class=CDLDescription>bit1 of the texture format descriptor</td></tr><tr><td class=CDLEntry>Bit[4]  D2C_READFORMAT3</td><td class=CDLDescription>bit2 of the texture format descriptor</td></tr><tr><td class=CDLEntry>Bit[5]  D2C_READFORMAT4</td><td class=CDLDescription>bit3 of the texture format descriptor</td></tr></table><p>implemented texture formats :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>0000</td><td class=CDLDescription>alpha8 (1 bpp)</td></tr><tr><td class=CDLEntry>0001</td><td class=CDLDescription>rgb565 (2 bpp)</td></tr><tr><td class=CDLEntry>0010</td><td class=CDLDescription>argb8888 (4 bpp)</td></tr><tr><td class=CDLEntry>0011</td><td class=CDLDescription>argb4444 (2 bpp)</td></tr><tr><td class=CDLEntry>0100</td><td class=CDLDescription>argb1555 (2 bpp)</td></tr><tr><td class=CDLEntry>0101</td><td class=CDLDescription>ai44 (1 bpp)</td></tr><tr><td class=CDLEntry>0110</td><td class=CDLDescription>rgba8888 (4 bpp)</td></tr><tr><td class=CDLEntry>0111</td><td class=CDLDescription>rgba4444 (2 bpp)</td></tr><tr><td class=CDLEntry>1000</td><td class=CDLDescription>rgba5551 (2 bpp)</td></tr><tr><td class=CDLEntry>1001</td><td class=CDLDescription>i8 (1 bpp, 1pbb)</td></tr><tr><td class=CDLEntry>1010</td><td class=CDLDescription>i4 (2 ppb)</td></tr><tr><td class=CDLEntry>1011</td><td class=CDLDescription>i2 (4 ppb)</td></tr><tr><td class=CDLEntry>1100</td><td class=CDLDescription>i1 (8 ppb)</td></tr><tr><td class=CDLEntry>1101</td><td class=CDLDescription>alpha4 (2 ppb)</td></tr><tr><td class=CDLEntry>1110</td><td class=CDLDescription>alpha2 (4 ppb)</td></tr><tr><td class=CDLEntry>1111</td><td class=CDLDescription>alpha1 (8 ppb)</td></tr></table><h4 class=CHeading>Framebuffer</h4><p>Writeback frame buffer formats are defined by</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[20] D2C_WRITEFORMAT1</td><td class=CDLDescription>bit0 of the framebuffer format descriptor</td></tr><tr><td class=CDLEntry>Bit[21] D2C_WRITEFORMAT2</td><td class=CDLDescription>bit1 of the framebuffer format descriptor</td></tr><tr><td class=CDLEntry>Bit[8]  D2C_WRITEFORMAT3</td><td class=CDLDescription>bit2 of the framebuffer format descriptor</td></tr></table><p>The standard dave uses as framebuffer formats</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>000</td><td class=CDLDescription>alpha8 (1 bpp)</td></tr><tr><td class=CDLEntry>001</td><td class=CDLDescription>rgb565 (2 bpp)</td></tr><tr><td class=CDLEntry>010</td><td class=CDLDescription>argb8888 (4 bpp)</td></tr><tr><td class=CDLEntry>011</td><td class=CDLDescription>argb4444 (2 bpp)</td></tr><tr><td class=CDLEntry>110</td><td class=CDLDescription>rgba8888 (4 bpp)</td></tr><tr><td class=CDLEntry>111</td><td class=CDLDescription>rgba4444 (2 bpp)</td></tr></table><h4 class=CHeading>Color Channel Blending</h4><p>After a pixelcolor has been constructed the new pixel (src) is blended with the current framebuffer content (dst) as defined by the following flags:</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[9]  D2C_BSF</td><td class=CDLDescription>src factor is alpha (factor is 1 per default)</td></tr><tr><td class=CDLEntry>Bit[10] D2C_BDF</td><td class=CDLDescription>dst factor is alpha (factor is 1 per default)</td></tr><tr><td class=CDLEntry>Bit[11] D2C_BSI</td><td class=CDLDescription>src factor will be inverted (meaning 1-a or 1-1 depending on BSF)</td></tr><tr><td class=CDLEntry>Bit[12] D2C_BDI</td><td class=CDLDescription>dst factor will be inverted (meaning 1-a or 1-1 depending on BDF)</td></tr><tr><td class=CDLEntry>Bit[13] D2C_BC2</td><td class=CDLDescription>blending is done with <a href="d2_reg_color-txt.html#D2_COLOR2" class=LRegister id=link11 onMouseOver="ShowTip(event, 'tt6', 'link11')" onMouseOut="HideTip('tt6')">D2_COLOR2</a> instead of the real dst value</td></tr></table><h4 class=CHeading>Alpha Channel Blending</h4><p>There are two modes for alpha channel blending :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[3]</td><td class=CDLDescription>USE_ACB</td></tr></table><p>If USE_ACB = 0 then the former write-alpha mode is used (see also feature bits of <a href="#D2_HWREVISION" class=LRegister id=link12 onMouseOver="ShowTip(event, 'tt4', 'link12')" onMouseOut="HideTip('tt4')">D2_HWREVISION</a>) :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[22] D2C_WRITEALPHA1</td><td class=CDLDescription>bit0 of the &lsquo;alpha source&rsquo;</td></tr><tr><td class=CDLEntry>Bit[23] D2C_WRITEALPHA2</td><td class=CDLDescription>bit1 of the &lsquo;alpha source&rsquo;</td></tr></table><p>An &lsquo;alpha source&rsquo; is relevant only if the framebuffer format includes an alpha channel.&nbsp; In this case the destination alpha is filled with:</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>00</td><td class=CDLDescription>alpha from <a href="d2_reg_color-txt.html#D2_COLOR2" class=LRegister id=link13 onMouseOver="ShowTip(event, 'tt6', 'link13')" onMouseOut="HideTip('tt6')">D2_COLOR2</a></td></tr><tr><td class=CDLEntry>01</td><td class=CDLDescription>src alpha (pixel coverage)</td></tr><tr><td class=CDLEntry>10</td><td class=CDLDescription>reserved (alpha is set to zero)</td></tr><tr><td class=CDLEntry>11</td><td class=CDLDescription>existing framebuffer alpha (alpha channel is kept unchanged)</td></tr></table><p>If USE_ACB = 1 then the full alpha channel blending is used as defined by the following flags :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[6]  D2C_BSFA</td><td class=CDLDescription>src factor is alpha (factor is 1 per default)</td></tr><tr><td class=CDLEntry>Bit[7] D2C_BDFA</td><td class=CDLDescription>dst factor is alpha (factor is 1 per default)</td></tr><tr><td class=CDLEntry>Bit[28] D2C_BSIA</td><td class=CDLDescription>src factor will be inverted (meaning 1-a or 1-1 depending on BSFA)</td></tr><tr><td class=CDLEntry>Bit[29] D2C_BDIA</td><td class=CDLDescription>dst factor will be inverted (meaning 1-a or 1-1 depending on BDFA)</td></tr><tr><td class=CDLEntry>Bit[xx] D2C_BC2A</td><td class=CDLDescription>blending is done with the alpha channel of <a href="d2_reg_color-txt.html#D2_COLOR2" class=LRegister id=link14 onMouseOver="ShowTip(event, 'tt6', 'link14')" onMouseOut="HideTip('tt6')">D2_COLOR2</a> instead of the real dst value.&nbsp; This is an internal bit that is set if &lsquo;alpha source&rsquo; is set to 00.</td></tr></table><h4 class=CHeading>CLUT</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[25] D2C_CLUT_ENABLE</td><td class=CDLDescription>enable the use of the CLUT (see also feature bits of <a href="#D2_HWREVISION" class=LRegister id=link15 onMouseOver="ShowTip(event, 'tt4', 'link15')" onMouseOut="HideTip('tt4')">D2_HWREVISION</a>); if disabled the texture indices are written to FB</td></tr></table><p>The entries of the CLUT are 32 bit words (see <a href="d2_reg_tex-txt.html#D2_TEXCLUT_DATA" class=LRegister id=link16 onMouseOver="ShowTip(event, 'tt8', 'link16')" onMouseOut="HideTip('tt8')">D2_TEXCLUT_DATA</a>).&nbsp; There can be one of two formats :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[27] D2C_CLUTFORMAT1</td><td class=CDLDescription>bit0 of the CLUT entry format</td></tr></table><p>The CLUT entry formats are :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>0</td><td class=CDLDescription>argb8888 (4 bpp)</td></tr><tr><td class=CDLEntry>1</td><td class=CDLDescription>rgb565 (2 bpp x 2) two entries per 32 bit word</td></tr></table><h4 class=CHeading>RLE decoder</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[24] D2C_RLE_ENABLE</td><td class=CDLDescription>enable RLE decoder (see also feature bits of <a href="#D2_HWREVISION" class=LRegister id=link17 onMouseOver="ShowTip(event, 'tt4', 'link17')" onMouseOut="HideTip('tt4')">D2_HWREVISION</a>)</td></tr></table><p>The following bits define the RLE format :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[30] D2C_RLEFORMAT1</td><td class=CDLDescription>bit0 of RLE texel format</td></tr><tr><td class=CDLEntry>Bit[31] D2C_RLEFORMAT2</td><td class=CDLDescription>bit1 of RLE texel format</td></tr></table><p>The RLE texel format complies to the Targa specification and can be :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>00</td><td class=CDLDescription>1 byte per pixel</td></tr><tr><td class=CDLEntry>01</td><td class=CDLDescription>2 byte per pixel</td></tr><tr><td class=CDLEntry>10</td><td class=CDLDescription>3 byte per pixel</td></tr><tr><td class=CDLEntry>11</td><td class=CDLDescription>4 byte per pixel</td></tr></table><h4 class=CHeading>Color keying</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[26] D2C_COLKEY_ENABLE</td><td class=CDLDescription>enable color keying (see also <a href="d2_reg_tex-txt.html#D2_COLKEY" class=LRegister id=link18 onMouseOver="ShowTip(event, 'tt9', 'link18')" onMouseOut="HideTip('tt9')">D2_COLKEY</a> and feature bits of <a href="#D2_HWREVISION" class=LRegister id=link19 onMouseOver="ShowTip(event, 'tt4', 'link19')" onMouseOut="HideTip('tt4')">D2_HWREVISION</a>)</td></tr></table></div></div></div>

<div class="CRegister"><div class=CTopic><h3 class=CTitle><a name="D2_IRQCTL"></a>D2_IRQCTL</h3><div class=CBody><p>interrupt control register</p><p>Offset: 48</p><p>DAVE2 features three sources for interrupts.&nbsp; They can be enabled and cleared individually.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>enumeration finished</td><td class=CDLDescription>this interrupt is issued after every enumeration has finished.&nbsp; An enumeration is triggered by writing to <a href="d2_reg_misc-txt.html#D2_ORIGIN" class=LRegister id=link20 onMouseOver="ShowTip(event, 'tt10', 'link20')" onMouseOut="HideTip('tt10')">D2_ORIGIN</a>.&nbsp; This interrupt can be used if the CPU sets up all registers and waits for the enumeration to finish.&nbsp; It should not be used if the display list reader is active.</td></tr><tr><td class=CDLEntry>dlist finished</td><td class=CDLDescription>this interrupt is issued if the display list reader is used and it reads a display list end command (see special cases of <a href="d2_dlist-txt.html#Display_list_format" class=LSection id=link21 onMouseOver="ShowTip(event, 'tt11', 'link21')" onMouseOut="HideTip('tt11')">Display list format</a>).&nbsp; The display list reader starts to execute a display list if the start address of the display list is written to <a href="d2_reg_misc-txt.html#D2_DLISTSTART" class=LRegister id=link22 onMouseOver="ShowTip(event, 'tt12', 'link22')" onMouseOut="HideTip('tt12')">D2_DLISTSTART</a>.</td></tr><tr><td class=CDLEntry>bus error</td><td class=CDLDescription>this interrupt is issued if any of the three bus adapters signals an error (see <a href="#D2_STATUS" class=LRegister id=link23 onMouseOver="ShowTip(event, 'tt13', 'link23')" onMouseOut="HideTip('tt13')">D2_STATUS</a>)</td></tr></table><p>Read <a href="#D2_STATUS" class=LRegister id=link24 onMouseOver="ShowTip(event, 'tt13', 'link24')" onMouseOut="HideTip('tt13')">D2_STATUS</a> to determine the current IRQ state (inside the IRQ handler e.g.).</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[0]  D2IRQCTL_ENABLE_FINISH_ENUM</td><td class=CDLDescription>Interruptmask enable &lsquo;Enumeration is finished&rsquo;</td></tr><tr><td class=CDLEntry>Bit[1]  D2IRQCTL_ENABLE_FINISH_DLIST</td><td class=CDLDescription>Interruptmask enable &lsquo;Displaylist is finished&rsquo;</td></tr><tr><td class=CDLEntry>Bit[2]  D2IRQCTL_CLR_FINISH_ENUM</td><td class=CDLDescription>Clear Interrupt &lsquo;Enumeration is finished&rsquo;</td></tr><tr><td class=CDLEntry>Bit[3]  D2IRQCTL_CLR_FINISH_DLIST</td><td class=CDLDescription>Clear Interrupt &lsquo;Displaylist is finished&rsquo;.&nbsp; Make sure to clear the IRQ before starting the DLR again!&nbsp; No register writes must be done by the CPU while the DLR is active!</td></tr><tr><td class=CDLEntry>Bit[4]  D2IRQCTL_ENABLE_BUS_ERROR</td><td class=CDLDescription>Interruptmask enable &lsquo;Bus error&rsquo;</td></tr><tr><td class=CDLEntry>Bit[5]  D2IRQCTL_CLR_BUS_ERROR</td><td class=CDLDescription>Clear Interrupt &lsquo;Bus error&rsquo;</td></tr></table></div></div></div>

<div class="CRegister"><div class=CTopic><h3 class=CTitle><a name="D2_CACHECTL"></a>D2_CACHECTL</h3><div class=CBody><p>cache control register</p><p>Offset: 49</p><p>Internal caches can be enabled/disabled and flushed using this register.&nbsp; Note that caches will be disabled if a value without its enable bits set is written to D2_CACHECTL.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[0]  D2C_CACHECTL_ENABLE_FB</td><td class=CDLDescription>Framebuffer cache enable</td></tr><tr><td class=CDLEntry>Bit[2]  D2C_CACHECTL_ENABLE_TX</td><td class=CDLDescription>Texture cache enable</td></tr><tr><td class=CDLEntry>Bit[1]  D2C_CACHECTL_FLUSH_FB</td><td class=CDLDescription>Flush framebuffer cache</td></tr><tr><td class=CDLEntry>Bit[3]  D2C_CACHECTL_FLUSH_TX</td><td class=CDLDescription>Flush texture cache</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="read_only"></a>read only</h3></div></div>

<div class="CRegister"><div class=CTopic><h3 class=CTitle><a name="D2_STATUS"></a>D2_STATUS</h3><div class=CBody><p>status control register</p><p>Offset: 0</p><p>The current dave status can be polled by reading this register.&nbsp; It contains a combination of the following bits :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[0]  D2C_BUSY_ENUM</td><td class=CDLDescription>enumeration unit busy, cant start new primitive</td></tr><tr><td class=CDLEntry>Bit[1]  D2C_BUSY_WRITE</td><td class=CDLDescription>framebuffer writeback busy, cant change framebuffer type</td></tr><tr><td class=CDLEntry>Bit[2]  D2C_CACHE_DIRTY</td><td class=CDLDescription>framebuffer cache dirty, cant flip frame</td></tr><tr><td class=CDLEntry>Bit[3]  D2C_DLISTACTIVE</td><td class=CDLDescription>display list active, cant direct access hwregs</td></tr><tr><td class=CDLEntry>Bit[4]  D2C_IRQ_ENUM</td><td class=CDLDescription>IRQ on enumeration finish</td></tr><tr><td class=CDLEntry>Bit[5]  D2C_IRQ_DLIST</td><td class=CDLDescription>IRQ on display list finish</td></tr><tr><td class=CDLEntry>Bit[6]  D2C_IRQ_BUS_ERROR</td><td class=CDLDescription>IRQ on bus error</td></tr><tr><td class=CDLEntry>Bit[10..8] D2C_IRQ_BUS_ERROR_SRC</td><td class=CDLDescription>source interface of bus error</td></tr></table><p>Source interface bus error :</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>001</td><td class=CDLDescription>MFB interface</td></tr><tr><td class=CDLEntry>010</td><td class=CDLDescription>MTX interface</td></tr><tr><td class=CDLEntry>100</td><td class=CDLDescription>MDL interface</td></tr></table><p>Depending on the hardware featureset (see <a href="#D2_HWREVISION" class=LRegister id=link25 onMouseOver="ShowTip(event, 'tt4', 'link25')" onMouseOut="HideTip('tt4')">D2_HWREVISION</a>) some bits might be irrelevant on a specific HW platform.</p></div></div></div>

<div class="CRegister"><div class=CTopic><h3 class=CTitle><a name="D2_HWREVISION"></a>D2_HWREVISION</h3><div class=CBody><p>hardware version and featureset ID</p><p>Offset: 1</p><p>Read this (constant) register to identify the present hardware revision and featureset.</p><h4 class=CHeading>HW Revision ID structure</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[11..0]</td><td class=CDLDescription>Revision number (Bit[11..8] = branch number; Bit[7..0] = revision nuber)</td></tr><tr><td class=CDLEntry>Bit[15..12]</td><td class=CDLDescription>D/AVE Type</td></tr><tr><td class=CDLEntry>Bit[27..16]</td><td class=CDLDescription>Features</td></tr></table><h4 class=CHeading>D/AVE Type</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>0</td><td class=CDLDescription>D/AVE2DT-S</td></tr><tr><td class=CDLEntry>1</td><td class=CDLDescription>D/AVE2DT-L</td></tr></table><h4 class=CHeading>Feature Bits</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Bit[16]</td><td class=CDLDescription>SWDAVE (Software D/AVE)</td></tr><tr><td class=CDLEntry>Bit[17]</td><td class=CDLDescription>DLR (DisplayListReader available)</td></tr><tr><td class=CDLEntry>Bit[18]</td><td class=CDLDescription>FBCACHE (Framebuffer Cache available)</td></tr><tr><td class=CDLEntry>Bit[19]</td><td class=CDLDescription>TXCACHE (Texture Cache available)</td></tr><tr><td class=CDLEntry>Bit[20]</td><td class=CDLDescription>PERFCOUNT (Two performance counters available)</td></tr><tr><td class=CDLEntry>Bit[21]</td><td class=CDLDescription>TEXCLUT (Color Lookup Table 16x24bit for indexed textureformat available)</td></tr><tr><td class=CDLEntry>Bit[22]</td><td class=CDLDescription>FBPREFETCH (Framebuffer prefetch available)</td></tr><tr><td class=CDLEntry>Bit[23]</td><td class=CDLDescription>RLEUNIT (RLE texture decoder available)</td></tr><tr><td class=CDLEntry>Bit[24]</td><td class=CDLDescription>TEXCLUT256 (extend CLUT to 256x32bit ARGB8888)</td></tr><tr><td class=CDLEntry>Bit[25]</td><td class=CDLDescription>COLORKEY (color keying available)</td></tr><tr><td class=CDLEntry>Bit[26]</td><td class=CDLDescription>HILIMITERPRECISION (increaseable precision of limiters available)</td></tr><tr><td class=CDLEntry>Bit[27]</td><td class=CDLDescription>ALPHACHANNELBLENDING (full alpha channel blending available)</td></tr></table></div></div></div>

</div><!--Content-->


<div id=Footer>&copy; 2016 by TES Electronic Solutions - Confidential NDA required -&nbsp; &middot;&nbsp; <a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Registermap</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile id=MSelected>Control registers</div></div><div class=MEntry><div class=MFile><a href="d2_reg_color-txt.html">Color registers</a></div></div><div class=MEntry><div class=MFile><a href="d2_reg_lim-txt.html">Limiter registers</a></div></div><div class=MEntry><div class=MFile><a href="d2_reg_tex-txt.html">Texture registers</a></div></div><div class=MEntry><div class=MFile><a href="d2_reg_misc-txt.html">Misc registers</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Display lists</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="d2_dlist-txt.html">Display list format</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">Index</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Registers.html">Registers</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Registers">Registers</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CRegister>Limiter1 band width parameter</div></div><div class=CToolTip id="tt2"><div class=CRegister>Limiter2 band width parameter (see D2_L1BAND)</div></div><div class=CToolTip id="tt3"><div class=CRegister>framebuffer pitch and spanstore delay</div></div><div class=CToolTip id="tt4"><div class=CRegister>hardware version and featureset ID</div></div><div class=CToolTip id="tt5"><div class=CRegister>Base color register</div></div><div class=CToolTip id="tt6"><div class=CRegister>Secondary color register</div></div><div class=CToolTip id="tt7"><div class=CRegister>Pattern register</div></div><div class=CToolTip id="tt8"><div class=CRegister>Color Lookup Table write data for the indexed texture format 256x32bit</div></div><div class=CToolTip id="tt9"><div class=CRegister>Color key value</div></div><div class=CToolTip id="tt10"><div class=CRegister>address of the first pixel in framebuffer</div></div><div class=CToolTip id="tt11"><div class=CSection>Display lists (Command lists) are stored using direct hwregister / value mappings. </div></div><div class=CToolTip id="tt12"><div class=CRegister>Displaylist start address</div></div><div class=CToolTip id="tt13"><div class=CRegister>status control register</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>